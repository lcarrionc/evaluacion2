<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title><%= (typeof accion !== 'undefined' && accion === 'editar') ? 'Editar Vehiculo' : 'Nuevo Vehiculo' %></title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

  <div class="max-w-lg mx-auto py-10">
    <h1 class="text-2xl font-bold mb-6 text-center">
      <%= (typeof accion !== 'undefined' && accion === 'editar') ? 'Editar Vehiculo' : 'Registrar Nuevo Vehiculo' %>
    </h1>

    <form action="<%= (typeof accion !== 'undefined' && accion === 'editar') ? ('/vehiculos/editar/' + vehivulo.id_vehiculo) : '/vehiculos' %>"
      method="POST" enctype="multipart/form-data" class="bg-white p-6 rounded shadow">

      <div class="mb-4">
        <label class="block mb-1 font-semibold">Modelo</label>
        <input type="text" name="modelo" value="<%= vehiculo ? vehiculo.modelo : '' %>" required
          class="w-full border rounded px-3 py-2">
      </div>

      <div class="mb-4">
        <label class="block mb-1 font-semibold">Precio</label>
        <input type="number" name="precio" value="<%= vehiculo ? vehiculo.precio : '' %>" required step="0.01"
          class="w-full border rounded px-3 py-2">
      </div>

      <div class="mb-4">
        <label class="block mb-1 font-semibold">Marca</label>
        <select name="id_marca" required class="w-full border rounded px-3 py-2">
          <option value="">Seleccione una marca</option>
          <% marcas.forEach(marca => { %>
            <option value="<%= marca.id_marca %>" 
              <%= vehiculo && vehiculo.id_marca === marca.id_marca ? 'selected' : '' %>>
              <%= marca.nombre %>
            </option>
          <% }) %>
        </select>
      </div>

      <div class="mb-4">
        <label class="block mb-1 font-semibold">Imagen del Vehículo</label>
        <input type="file" name="imagen_vehiculo" accept="image/*" class="w-full">
        <% if (vehiculo && vehiculo.imagen_vehiculo) { %>
          <img src="/uploads/<%= vehiculo.imagen_vehiculo %>" alt="Vehículo" class="h-20 mt-2 object-cover">
        <% } %>
      </div>

      <div class="flex justify-end">
        <a href="/vehiculos" class="bg-gray-400 text-white px-4 py-2 rounded mr-2 hover:bg-gray-500">Cancelar</a>
        <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
          Guardar
        </button>
      </div>

    </form>
  </div>

</body>
</html>
